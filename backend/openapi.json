{"openapi":"3.1.0","info":{"title":"AI手技モーションライブラリ","version":"0.1.0"},"paths":{"/api/v1/library/completed":{"get":{"tags":["library"],"summary":"Get completed analyses","description":"Get list of completed analyses with video information","operationId":"get_completed_analyses_api_v1_library_completed_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AnalysisResultResponse"},"title":"Response Get Completed Analyses Api V1 Library Completed Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/library/export/{analysis_id}":{"get":{"tags":["library"],"summary":"Export analysis data as CSV","description":"Export analysis data as CSV","operationId":"export_analysis_api_v1_library_export__analysis_id__get","parameters":[{"name":"analysis_id","in":"path","required":true,"schema":{"type":"string","title":"Analysis Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/upload":{"post":{"tags":["videos"],"summary":"Upload a video","description":"Upload a video file","operationId":"upload_video_api_v1_videos_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_video_api_v1_videos_upload_post"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VideoUploadResponse"}}}},"400":{"description":"Invalid input or file type not allowed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"413":{"description":"File too large","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/{video_id}":{"get":{"tags":["videos"],"summary":"Get video metadata","description":"Get video","operationId":"get_video_api_v1_videos__video_id__get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VideoResponse"}}}},"404":{"description":"Video not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/":{"get":{"tags":["videos"],"summary":"List videos","description":"List videos","operationId":"list_videos_api_v1_videos__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VideoResponse"},"title":"Response List Videos Api V1 Videos  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/{video_id}/stream":{"get":{"tags":["videos"],"summary":"Stream video file","description":"Stream video file for playback with Range support","operationId":"stream_video_api_v1_videos__video_id__stream_get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Video not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/{video_id}/thumbnail":{"get":{"tags":["videos"],"summary":"Get video thumbnail (first frame)","description":"Get the first frame of the video as a thumbnail","operationId":"get_video_thumbnail_api_v1_videos__video_id__thumbnail_get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}},{"name":"width","in":"query","required":false,"schema":{"type":"integer","default":640,"title":"Width"}},{"name":"height","in":"query","required":false,"schema":{"type":"integer","default":480,"title":"Height"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Video not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/{video_id}/segment":{"post":{"tags":["videos"],"summary":"Segment instrument using SAM","description":"Segment an instrument in the video using SAM\n\n- For point prompt: coordinates = [[x1, y1], [x2, y2], ...]\n- For box prompt: coordinates = [[x1, y1, x2, y2]]","operationId":"segment_instrument_api_v1_videos__video_id__segment_post","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_segment_instrument_api_v1_videos__video_id__segment_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Video not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/{video_id}/instruments":{"post":{"tags":["videos"],"summary":"Register selected instruments","description":"Register selected instruments for tracking\n\nEach instrument should have:\n- name: Instrument name\n- mask: Base64 encoded mask\n- bbox: Bounding box [x1, y1, x2, y2]\n- frame_number: Frame where it was selected","operationId":"register_instruments_api_v1_videos__video_id__instruments_post","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Body"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Video not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["videos"],"summary":"Get registered instruments","description":"Get registered instruments for a video","operationId":"get_instruments_api_v1_videos__video_id__instruments_get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Video or instruments not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/{video_id}/analyze":{"post":{"tags":["analysis"],"summary":"Start analysis","description":"Start video analysis","operationId":"start_analysis_api_v1_analysis__video_id__analyze_post","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisResponse"}}}},"400":{"description":"Analysis already in progress or invalid input","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Video not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/completed":{"get":{"tags":["analysis"],"summary":"Get completed analyses","description":"Get list of completed analyses with video information","operationId":"get_completed_analyses_api_v1_analysis_completed_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AnalysisResultResponse"},"title":"Response Get Completed Analyses Api V1 Analysis Completed Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/{analysis_id}/status":{"get":{"tags":["analysis"],"summary":"Get analysis status","description":"Get analysis progress status","operationId":"get_analysis_status_api_v1_analysis__analysis_id__status_get","parameters":[{"name":"analysis_id","in":"path","required":true,"schema":{"type":"string","title":"Analysis Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisStatusResponse"}}}},"404":{"description":"Analysis not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/{analysis_id}":{"get":{"tags":["analysis"],"summary":"Get analysis result","description":"Get analysis result","operationId":"get_analysis_result_api_v1_analysis__analysis_id__get","parameters":[{"name":"analysis_id","in":"path","required":true,"schema":{"type":"string","title":"Analysis Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalysisResultResponse"}}}},"404":{"description":"Analysis not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["analysis"],"summary":"Delete analysis result","description":"Delete analysis result and associated data","operationId":"delete_analysis_api_v1_analysis__analysis_id__delete","parameters":[{"name":"analysis_id","in":"path","required":true,"schema":{"type":"string","title":"Analysis Id"}}],"responses":{"200":{"description":"Analysis deleted successfully","content":{"application/json":{"schema":{}}}},"404":{"description":"Analysis not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/{analysis_id}/export":{"get":{"tags":["analysis"],"summary":"Export analysis data as CSV","description":"Export analysis data as CSV","operationId":"export_analysis_api_v1_analysis__analysis_id__export_get","parameters":[{"name":"analysis_id","in":"path","required":true,"schema":{"type":"string","title":"Analysis Id"}}],"responses":{"200":{"description":"CSV file","content":{"application/json":{"schema":{}},"text/csv":{}}},"404":{"description":"Analysis not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/test/mediapipe":{"get":{"tags":["analysis"],"summary":"Test MediaPipe functionality","description":"Test if MediaPipe is working correctly","operationId":"test_mediapipe_api_v1_analysis_test_mediapipe_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/annotations/save":{"post":{"tags":["annotations"],"summary":"Save annotations","description":"アノテーションを保存","operationId":"save_annotations_api_v1_annotations_save_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnnotationSaveRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnnotationResponse"}}}},"404":{"description":"Video not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Failed to save annotations","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/annotations/{video_id}":{"get":{"tags":["annotations"],"summary":"Get annotations for video","description":"動画のアノテーションを取得","operationId":"get_annotations_api_v1_annotations__video_id__get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Annotations Api V1 Annotations  Video Id  Get"}}}},"404":{"description":"Annotations not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/annotations/{video_id}/frames":{"get":{"tags":["annotations"],"summary":"Get video frames for annotation","description":"アノテーション用のフレームを取得","operationId":"get_frames_api_v1_annotations__video_id__frames_get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}},{"name":"fps","in":"query","required":false,"schema":{"type":"integer","default":5,"title":"Fps"}},{"name":"max_frames","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":100,"title":"Max Frames"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Frames Api V1 Annotations  Video Id  Frames Get"}}}},"404":{"description":"Video not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/annotations/{annotation_id}":{"delete":{"tags":["annotations"],"summary":"Delete annotation","description":"アノテーションを削除","operationId":"delete_annotation_api_v1_annotations__annotation_id__delete","parameters":[{"name":"annotation_id","in":"path","required":true,"schema":{"type":"string","title":"Annotation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"404":{"description":"Annotation not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scoring/reference":{"post":{"tags":["scoring"],"summary":"Create reference model","description":"基準動作モデルを作成","operationId":"create_reference_model_api_v1_scoring_reference_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReferenceModelCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReferenceModelResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scoring/references":{"get":{"tags":["scoring"],"summary":"Get reference models list","description":"基準動作モデルのリストを取得","operationId":"get_reference_models_api_v1_scoring_references_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReferenceModelListResponse"},"title":"Response Get Reference Models Api V1 Scoring References Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scoring/reference/{reference_id}":{"get":{"tags":["scoring"],"summary":"Get reference model details","description":"基準動作モデルの詳細を取得","operationId":"get_reference_model_api_v1_scoring_reference__reference_id__get","parameters":[{"name":"reference_id","in":"path","required":true,"schema":{"type":"string","title":"Reference Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReferenceModelResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scoring/compare":{"post":{"tags":["scoring"],"summary":"Start comparison","description":"比較評価を開始","operationId":"start_comparison_api_v1_scoring_compare_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComparisonCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComparisonResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scoring/comparison/{comparison_id}":{"get":{"tags":["scoring"],"summary":"Get comparison result","description":"比較結果を取得","operationId":"get_comparison_result_api_v1_scoring_comparison__comparison_id__get","parameters":[{"name":"comparison_id","in":"path","required":true,"schema":{"type":"string","title":"Comparison Id"}},{"name":"include_details","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Details"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComparisonDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scoring/comparison/{comparison_id}/status":{"get":{"tags":["scoring"],"summary":"Get comparison status","description":"比較処理のステータスを取得","operationId":"get_comparison_status_api_v1_scoring_comparison__comparison_id__status_get","parameters":[{"name":"comparison_id","in":"path","required":true,"schema":{"type":"string","title":"Comparison Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scoring/report/{comparison_id}":{"get":{"tags":["scoring"],"summary":"Generate comparison report","description":"比較レポートを生成","operationId":"get_comparison_report_api_v1_scoring_report__comparison_id__get","parameters":[{"name":"comparison_id","in":"path","required":true,"schema":{"type":"string","title":"Comparison Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComparisonReport"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scoring/comparisons":{"get":{"tags":["scoring"],"summary":"Get comparisons list","description":"比較結果のリストを取得","operationId":"get_comparisons_api_v1_scoring_comparisons_get","parameters":[{"name":"learner_analysis_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Learner Analysis Id"}},{"name":"reference_model_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reference Model Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/ComparisonStatus"},{"type":"null"}],"title":"Status"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ComparisonResponse"},"title":"Response Get Comparisons Api V1 Scoring Comparisons Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Service info","description":"Basic service information.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/health":{"get":{"summary":"Health check","description":"Health status for monitoring.","operationId":"health_check_api_v1_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AnalysisCreate":{"properties":{"video_id":{"type":"string","title":"Video Id"},"instruments":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Instruments"},"sampling_rate":{"type":"integer","title":"Sampling Rate","default":5}},"type":"object","required":["video_id"],"title":"AnalysisCreate"},"AnalysisResponse":{"properties":{"id":{"type":"string","title":"Id"},"video_id":{"type":"string","title":"Video Id"},"status":{"$ref":"#/components/schemas/AnalysisStatus"},"progress":{"type":"integer","title":"Progress"},"current_step":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Step"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"}},"type":"object","required":["id","video_id","status","progress","created_at"],"title":"AnalysisResponse"},"AnalysisResultResponse":{"properties":{"id":{"type":"string","title":"Id"},"video_id":{"type":"string","title":"Video Id"},"video_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Video Type"},"status":{"$ref":"#/components/schemas/AnalysisStatus"},"skeleton_data":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Skeleton Data"},"instrument_data":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Instrument Data"},"motion_analysis":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Motion Analysis"},"coordinate_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Coordinate Data"},"velocity_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Velocity Data"},"angle_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Angle Data"},"scores":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Scores"},"avg_velocity":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Velocity"},"max_velocity":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max Velocity"},"total_distance":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Total Distance"},"total_frames":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Frames"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"video":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Video"}},"type":"object","required":["id","video_id","status","created_at"],"title":"AnalysisResultResponse"},"AnalysisStatus":{"type":"string","enum":["pending","processing","completed","failed"],"title":"AnalysisStatus"},"AnalysisStatusResponse":{"properties":{"analysis_id":{"type":"string","title":"Analysis Id"},"video_id":{"type":"string","title":"Video Id"},"overall_progress":{"type":"integer","title":"Overall Progress"},"steps":{"items":{"$ref":"#/components/schemas/ProcessingStep"},"type":"array","title":"Steps"},"estimated_time_remaining":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Estimated Time Remaining"}},"type":"object","required":["analysis_id","video_id","overall_progress","steps"],"title":"AnalysisStatusResponse"},"AnnotationResponse":{"properties":{"id":{"type":"string","title":"Id"},"video_id":{"type":"string","title":"Video Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"frame_count":{"type":"integer","title":"Frame Count"},"total_annotations":{"type":"integer","title":"Total Annotations"}},"type":"object","required":["id","video_id","created_at","frame_count","total_annotations"],"title":"AnnotationResponse","description":"アノテーションレスポンス"},"AnnotationSaveRequest":{"properties":{"video_id":{"type":"string","title":"Video Id"},"annotations":{"items":{"$ref":"#/components/schemas/FrameAnnotation"},"type":"array","title":"Annotations"}},"type":"object","required":["video_id","annotations"],"title":"AnnotationSaveRequest","description":"アノテーション保存リクエスト"},"Body_segment_instrument_api_v1_videos__video_id__segment_post":{"properties":{"prompt_type":{"type":"string","title":"Prompt Type","description":"Type of prompt: 'point' or 'box'"},"coordinates":{"items":{"items":{"type":"number"},"type":"array"},"type":"array","title":"Coordinates","description":"Coordinates for the prompt"},"labels":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Labels","description":"Labels for points (1=foreground, 0=background)"},"frame_number":{"type":"integer","title":"Frame Number","description":"Frame number to segment","default":0}},"type":"object","required":["prompt_type","coordinates"],"title":"Body_segment_instrument_api_v1_videos__video_id__segment_post"},"Body_upload_video_api_v1_videos_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"video_type":{"type":"string","title":"Video Type"},"surgery_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Surgery Name"},"surgery_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Surgery Date"},"surgeon_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Surgeon Name"},"memo":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Memo"}},"type":"object","required":["file","video_type"],"title":"Body_upload_video_api_v1_videos_upload_post"},"BoundingBox":{"properties":{"x":{"type":"number","title":"X"},"y":{"type":"number","title":"Y"},"width":{"type":"number","title":"Width"},"height":{"type":"number","title":"Height"},"label":{"type":"string","title":"Label"}},"type":"object","required":["x","y","width","height","label"],"title":"BoundingBox","description":"バウンディングボックス"},"ComparisonCreate":{"properties":{"reference_model_id":{"type":"string","title":"Reference Model Id"},"learner_analysis_id":{"type":"string","title":"Learner Analysis Id"}},"type":"object","required":["reference_model_id","learner_analysis_id"],"title":"ComparisonCreate"},"ComparisonDetailResponse":{"properties":{"id":{"type":"string","title":"Id"},"reference_model_id":{"type":"string","title":"Reference Model Id"},"learner_analysis_id":{"type":"string","title":"Learner Analysis Id"},"status":{"$ref":"#/components/schemas/ComparisonStatus"},"progress":{"type":"integer","title":"Progress"},"overall_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Overall Score"},"speed_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Speed Score"},"smoothness_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Smoothness Score"},"stability_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Stability Score"},"efficiency_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Efficiency Score"},"dtw_distance":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Dtw Distance"},"feedback":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Feedback"},"metrics_comparison":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metrics Comparison"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"comparison_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Comparison Data"},"temporal_alignment":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Temporal Alignment"},"reference_model":{"anyOf":[{"$ref":"#/components/schemas/ReferenceModelResponse"},{"type":"null"}]}},"type":"object","required":["id","reference_model_id","learner_analysis_id","status","progress","created_at"],"title":"ComparisonDetailResponse"},"ComparisonReport":{"properties":{"comparison_id":{"type":"string","title":"Comparison Id"},"learner_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Learner Name"},"reference_name":{"type":"string","title":"Reference Name"},"comparison_date":{"type":"string","format":"date-time","title":"Comparison Date"},"overall_score":{"type":"number","title":"Overall Score"},"detailed_scores":{"additionalProperties":{"type":"number"},"type":"object","title":"Detailed Scores"},"feedback":{"$ref":"#/components/schemas/DetailedFeedback"},"improvement_plan":{"items":{"type":"string"},"type":"array","title":"Improvement Plan"},"graphs_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Graphs Data"}},"type":"object","required":["comparison_id","reference_name","comparison_date","overall_score","detailed_scores","feedback","improvement_plan"],"title":"ComparisonReport"},"ComparisonResponse":{"properties":{"id":{"type":"string","title":"Id"},"reference_model_id":{"type":"string","title":"Reference Model Id"},"learner_analysis_id":{"type":"string","title":"Learner Analysis Id"},"status":{"$ref":"#/components/schemas/ComparisonStatus"},"progress":{"type":"integer","title":"Progress"},"overall_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Overall Score"},"speed_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Speed Score"},"smoothness_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Smoothness Score"},"stability_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Stability Score"},"efficiency_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Efficiency Score"},"dtw_distance":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Dtw Distance"},"feedback":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Feedback"},"metrics_comparison":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metrics Comparison"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"}},"type":"object","required":["id","reference_model_id","learner_analysis_id","status","progress","created_at"],"title":"ComparisonResponse"},"ComparisonStatus":{"type":"string","enum":["pending","processing","completed","failed"],"title":"ComparisonStatus"},"DetailedFeedback":{"properties":{"strengths":{"items":{"$ref":"#/components/schemas/FeedbackItem"},"type":"array","title":"Strengths"},"weaknesses":{"items":{"$ref":"#/components/schemas/FeedbackItem"},"type":"array","title":"Weaknesses"},"suggestions":{"items":{"$ref":"#/components/schemas/FeedbackItem"},"type":"array","title":"Suggestions"},"overall_summary":{"type":"string","title":"Overall Summary"},"improvement_priority":{"items":{"type":"string"},"type":"array","title":"Improvement Priority"}},"type":"object","required":["strengths","weaknesses","suggestions","overall_summary","improvement_priority"],"title":"DetailedFeedback"},"ErrorResponse":{"properties":{"detail":{"type":"string","title":"Detail"},"status_code":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Status Code"},"error_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Type"}},"type":"object","required":["detail"],"title":"ErrorResponse","description":"エラーレスポンス","example":{"detail":"Video not found","error_type":"NotFoundError","status_code":404}},"FeedbackItem":{"properties":{"category":{"type":"string","title":"Category"},"title":{"type":"string","title":"Title"},"description":{"type":"string","title":"Description"},"importance":{"type":"number","title":"Importance"},"specific_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Specific Time"}},"type":"object","required":["category","title","description","importance"],"title":"FeedbackItem"},"FrameAnnotation":{"properties":{"frame_number":{"type":"integer","title":"Frame Number"},"annotations":{"items":{"$ref":"#/components/schemas/BoundingBox"},"type":"array","title":"Annotations"}},"type":"object","required":["frame_number","annotations"],"title":"FrameAnnotation","description":"フレームアノテーション"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ProcessingStep":{"properties":{"name":{"type":"string","title":"Name"},"status":{"type":"string","title":"Status"},"progress":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Progress"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["name","status"],"title":"ProcessingStep"},"ReferenceModelCreate":{"properties":{"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"analysis_id":{"type":"string","title":"Analysis Id"},"reference_type":{"$ref":"#/components/schemas/ReferenceType","default":"expert"},"surgeon_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Surgeon Name"},"surgery_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Surgery Type"},"surgery_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Surgery Date"},"weights":{"anyOf":[{"additionalProperties":{"type":"number"},"type":"object"},{"type":"null"}],"title":"Weights"}},"type":"object","required":["name","analysis_id"],"title":"ReferenceModelCreate"},"ReferenceModelListResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"surgeon_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Surgeon Name"},"surgery_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Surgery Type"},"surgery_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Surgery Date"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","name","created_at"],"title":"ReferenceModelListResponse"},"ReferenceModelResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"analysis_id":{"type":"string","title":"Analysis Id"},"reference_type":{"$ref":"#/components/schemas/ReferenceType"},"surgeon_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Surgeon Name"},"surgery_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Surgery Type"},"surgery_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Surgery Date"},"weights":{"additionalProperties":{"type":"number"},"type":"object","title":"Weights"},"avg_speed_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Speed Score"},"avg_smoothness_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Smoothness Score"},"avg_stability_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Stability Score"},"avg_efficiency_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Efficiency Score"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"is_active":{"type":"integer","title":"Is Active"}},"type":"object","required":["id","name","analysis_id","reference_type","weights","created_at","is_active"],"title":"ReferenceModelResponse"},"ReferenceType":{"type":"string","enum":["expert","standard","custom"],"title":"ReferenceType"},"SuccessResponse":{"properties":{"message":{"type":"string","title":"Message"},"data":{"anyOf":[{},{"type":"null"}],"title":"Data"}},"type":"object","required":["message"],"title":"SuccessResponse","description":"成功レスポンス","example":{"data":{"id":"123","status":"completed"},"message":"Operation completed successfully"}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VideoResponse":{"properties":{"surgery_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Surgery Name"},"surgery_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Surgery Date"},"surgeon_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Surgeon Name"},"memo":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Memo"},"video_type":{"$ref":"#/components/schemas/VideoType"},"id":{"type":"string","title":"Id"},"filename":{"type":"string","title":"Filename"},"original_filename":{"type":"string","title":"Original Filename"},"duration":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Duration"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["video_type","id","filename","original_filename","created_at","updated_at"],"title":"VideoResponse"},"VideoType":{"type":"string","enum":["internal","external","external_no_instruments","external_with_instruments"],"title":"VideoType"},"VideoUploadResponse":{"properties":{"video_id":{"type":"string","title":"Video Id"},"filename":{"type":"string","title":"Filename"},"message":{"type":"string","title":"Message","default":"Upload successful"}},"type":"object","required":["video_id","filename"],"title":"VideoUploadResponse"}}}}